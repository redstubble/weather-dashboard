{"version":3,"sources":["webpack:///./node_modules/d3-shape/src/area.js","webpack:///./node_modules/d3-shape/src/curve/step.js","webpack:///./src/pages/d3.windDashboard.tsx"],"names":["x1","defined","context","curve","output","area","data","i","j","k","d","buffer","n","length","defined0","x0z","Array","y0z","areaStart","lineStart","lineEnd","point","areaEnd","x0","y0","y1","arealine","undefined","x","_","arguments","y","lineX0","lineY0","lineY1","lineX1","Step","t","this","_context","_t","prototype","_line","NaN","_x","_y","_point","lineTo","closePath","moveTo","stepAfter","WindDashboard","mergedWeatherData","targetId","useState","canvas","setCanvas","target","id","ElementResize","width","useEffect","select","selectAll","remove","scaffoldCanvas","populateGraph","containerDiv","window","document","getElementById","clientWidth","height","clientHeight","svg","append","attr","defaultCanvas","left","right","top","bottom","node","DateArr","map","datetime","wind_from_direction_at_10m_above_ground_level","wind_speed_at_10m_above_ground_level","filter","removeUndefined","range","extent","scaleTime","domain","windSpeed","windSpeedRange","lowestWindSpd","highestWindSpd","scaleLinear","_area","curveStepAfter","windSpeedData","line","a","enter","console","log","style","call","axisBottom","tickFormat","date","formatMillisecond","timeFormat","formatSecond","formatMinute","formatHour","formatDay","formatWeek","formatMonth","formatYear","timeSecond","timeMinute","timeHour","timeDay","timeMonth","timeWeek","timeYear","axisRight","text","axisLeft","ticks","Math","min","round","floor","className","minHeight","textAlign","borderBottom","padding","replace"],"mappings":"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","file":"component---src-pages-d-3-wind-dashboard-tsx-51c0df767626ab37a481.js","sourcesContent":["import { path } from \"d3-path\";\nimport array from \"./array.js\";\nimport constant from \"./constant.js\";\nimport curveLinear from \"./curve/linear.js\";\nimport line from \"./line.js\";\nimport { x as pointX, y as pointY } from \"./point.js\";\nexport default function (x0, y0, y1) {\n  var x1 = null,\n      defined = constant(true),\n      context = null,\n      curve = curveLinear,\n      output = null;\n  x0 = typeof x0 === \"function\" ? x0 : x0 === undefined ? pointX : constant(+x0);\n  y0 = typeof y0 === \"function\" ? y0 : y0 === undefined ? constant(0) : constant(+y0);\n  y1 = typeof y1 === \"function\" ? y1 : y1 === undefined ? pointY : constant(+y1);\n\n  function area(data) {\n    var i,\n        j,\n        k,\n        n = (data = array(data)).length,\n        d,\n        defined0 = false,\n        buffer,\n        x0z = new Array(n),\n        y0z = new Array(n);\n    if (context == null) output = curve(buffer = path());\n\n    for (i = 0; i <= n; ++i) {\n      if (!(i < n && defined(d = data[i], i, data)) === defined0) {\n        if (defined0 = !defined0) {\n          j = i;\n          output.areaStart();\n          output.lineStart();\n        } else {\n          output.lineEnd();\n          output.lineStart();\n\n          for (k = i - 1; k >= j; --k) {\n            output.point(x0z[k], y0z[k]);\n          }\n\n          output.lineEnd();\n          output.areaEnd();\n        }\n      }\n\n      if (defined0) {\n        x0z[i] = +x0(d, i, data), y0z[i] = +y0(d, i, data);\n        output.point(x1 ? +x1(d, i, data) : x0z[i], y1 ? +y1(d, i, data) : y0z[i]);\n      }\n    }\n\n    if (buffer) return output = null, buffer + \"\" || null;\n  }\n\n  function arealine() {\n    return line().defined(defined).curve(curve).context(context);\n  }\n\n  area.x = function (_) {\n    return arguments.length ? (x0 = typeof _ === \"function\" ? _ : constant(+_), x1 = null, area) : x0;\n  };\n\n  area.x0 = function (_) {\n    return arguments.length ? (x0 = typeof _ === \"function\" ? _ : constant(+_), area) : x0;\n  };\n\n  area.x1 = function (_) {\n    return arguments.length ? (x1 = _ == null ? null : typeof _ === \"function\" ? _ : constant(+_), area) : x1;\n  };\n\n  area.y = function (_) {\n    return arguments.length ? (y0 = typeof _ === \"function\" ? _ : constant(+_), y1 = null, area) : y0;\n  };\n\n  area.y0 = function (_) {\n    return arguments.length ? (y0 = typeof _ === \"function\" ? _ : constant(+_), area) : y0;\n  };\n\n  area.y1 = function (_) {\n    return arguments.length ? (y1 = _ == null ? null : typeof _ === \"function\" ? _ : constant(+_), area) : y1;\n  };\n\n  area.lineX0 = area.lineY0 = function () {\n    return arealine().x(x0).y(y0);\n  };\n\n  area.lineY1 = function () {\n    return arealine().x(x0).y(y1);\n  };\n\n  area.lineX1 = function () {\n    return arealine().x(x1).y(y0);\n  };\n\n  area.defined = function (_) {\n    return arguments.length ? (defined = typeof _ === \"function\" ? _ : constant(!!_), area) : defined;\n  };\n\n  area.curve = function (_) {\n    return arguments.length ? (curve = _, context != null && (output = curve(context)), area) : curve;\n  };\n\n  area.context = function (_) {\n    return arguments.length ? (_ == null ? context = output = null : output = curve(context = _), area) : context;\n  };\n\n  return area;\n}","function Step(context, t) {\n  this._context = context;\n  this._t = t;\n}\n\nStep.prototype = {\n  areaStart: function areaStart() {\n    this._line = 0;\n  },\n  areaEnd: function areaEnd() {\n    this._line = NaN;\n  },\n  lineStart: function lineStart() {\n    this._x = this._y = NaN;\n    this._point = 0;\n  },\n  lineEnd: function lineEnd() {\n    if (0 < this._t && this._t < 1 && this._point === 2) this._context.lineTo(this._x, this._y);\n    if (this._line || this._line !== 0 && this._point === 1) this._context.closePath();\n    if (this._line >= 0) this._t = 1 - this._t, this._line = 1 - this._line;\n  },\n  point: function point(x, y) {\n    x = +x, y = +y;\n\n    switch (this._point) {\n      case 0:\n        this._point = 1;\n        this._line ? this._context.lineTo(x, y) : this._context.moveTo(x, y);\n        break;\n\n      case 1:\n        this._point = 2;\n      // proceed\n\n      default:\n        {\n          if (this._t <= 0) {\n            this._context.lineTo(this._x, y);\n\n            this._context.lineTo(x, y);\n          } else {\n            var x1 = this._x * (1 - this._t) + x * this._t;\n\n            this._context.lineTo(x1, this._y);\n\n            this._context.lineTo(x1, y);\n          }\n\n          break;\n        }\n    }\n\n    this._x = x, this._y = y;\n  }\n};\nexport default function (context) {\n  return new Step(context, 0.5);\n}\nexport function stepBefore(context) {\n  return new Step(context, 0);\n}\nexport function stepAfter(context) {\n  return new Step(context, 1);\n}","import React, { Component, useEffect, useState } from \"react\";\nimport { Container, Form, Checkbox } from \"semantic-ui-react\";\nimport { nest } from \"d3-collection\";\nimport { select } from \"d3-selection\";\nimport { timeParse, timeFormat } from \"d3-time-format\";\nimport {\n  timeSecond,\n  timeMinute,\n  timeHour,\n  timeDay,\n  timeMonth,\n  timeWeek,\n  timeYear,\n} from \"d3-time\";\nimport { max, min, extent } from \"d3-array\";\nimport { scaleOrdinal, scaleTime, scaleLinear } from \"d3-scale\";\nimport { schemeCategory10 } from \"d3-scale-chromatic\";\nimport { line, area, curveNatural, curveStepAfter } from \"d3-shape\";\nimport { axisBottom, axisLeft, axisRight } from \"d3-axis\";\nimport { MergedWeatherDataType, removeUndefined } from \"../api/weatherData\";\nimport { CanvasType, defaultCanvas } from \"../utils/canvas\";\nimport { ElementResize } from \"../components/elementResize\";\n\nconst wrapperDiv = \".graph-wind\";\n\nfunction WindDashboard({\n  mergedWeatherData,\n}: {\n  mergedWeatherData: MergedWeatherDataType[] | undefined;\n}) {\n  const targetId = \"graph-canvas-wind\";\n  const [canvas, setCanvas] = useState<CanvasType>();\n  const target = { id: targetId };\n  const [width, height] = ElementResize(target);\n\n  const clearGraph = () => {\n    select(wrapperDiv).selectAll(\"*\").remove();\n  };\n\n  useEffect(() => {\n    clearGraph();\n    const canvas = scaffoldCanvas();\n    if (canvas) {\n      setCanvas(canvas);\n    }\n  }, [mergedWeatherData, width]);\n\n  useEffect(() => {\n    populateGraph();\n  }, [canvas]);\n\n  const scaffoldCanvas = (): CanvasType | undefined => {\n    const containerDiv = window.document.getElementById(targetId);\n    if (containerDiv && mergedWeatherData) {\n      const width = containerDiv?.clientWidth ?? 0;\n      const height = containerDiv?.clientHeight ?? 0;\n      debugger;\n      const svg = select(wrapperDiv)\n        .append(\"svg\")\n        .attr(\"height\", height)\n        .attr(\"width\", width);\n      const x = width - (defaultCanvas.left + defaultCanvas.right);\n      const y = height - (defaultCanvas.top + defaultCanvas.bottom);\n      const node = svg\n        .append(\"g\")\n        .attr(\n          \"transform\",\n          \"translate(\" + defaultCanvas.left + \",\" + defaultCanvas.top + \")\"\n        );\n      return {\n        x,\n        y,\n        node,\n      };\n    }\n    return undefined;\n  };\n\n  const populateGraph = () => {\n    if (mergedWeatherData && canvas) {\n      const data = mergedWeatherData;\n\n      /** Time on x axis */\n      const DateArr = data\n        .map((d) => {\n          if (\n            d.datetime &&\n            (d.wind_from_direction_at_10m_above_ground_level ||\n              d.wind_speed_at_10m_above_ground_level)\n          ) {\n            return d.datetime;\n          }\n          return undefined;\n        })\n        .filter(removeUndefined);\n      const range = extent(DateArr) as [Date, Date];\n      const x = scaleTime()\n        .range([0, canvas.x - 30])\n        .domain(range);\n\n      /** Temp on y axis */\n      const windSpeed = data\n        .map((d) => d.wind_speed_at_10m_above_ground_level)\n        .filter(removeUndefined);\n      const windSpeedRange = extent(windSpeed) as [number, number];\n      const [lowestWindSpd, highestWindSpd] = windSpeedRange;\n      const y = scaleLinear()\n        .range([canvas?.y ?? 0, 0])\n        .domain([lowestWindSpd, highestWindSpd]);\n\n      const y1 = scaleLinear()\n        .range([canvas?.y ?? 0, 0])\n        .domain([0, 360]);\n\n      const _area = area<[Date, number]>()\n        .curve(curveStepAfter)\n        .x(function (d) {\n          return x(d[0]);\n        })\n        .y0(canvas.y)\n        .y1(function (d) {\n          return y(d[1]);\n        });\n\n      const _line = line<[Date, number]>()\n        .curve(curveStepAfter)\n        .x(function (d) {\n          return x(d[0]);\n        })\n        .y(function (d) {\n          const yAxis = y(d[1]);\n          return y(d[1]);\n        });\n\n      const lineGraph = canvas.node.append(\"g\");\n\n      const windSpeedData = mergedWeatherData\n        .filter((a) => a.wind_speed_at_10m_above_ground_level)\n        .map(\n          (a) =>\n            [a.datetime!, a.wind_speed_at_10m_above_ground_level!] as [\n              Date,\n              number\n            ]\n        );\n\n      canvas.node\n        .append(\"g\")\n        .selectAll(\".location\")\n        .data([windSpeedData])\n        .enter()\n        .append(\"g\")\n        .attr(\"class\", \"location\")\n        .append(\"path\")\n        .attr(\"class\", \"line\")\n        .attr(\"d\", function (d) {\n          const t = _area(d);\n          console.log(t);\n          return t;\n        })\n        .style(\"stroke\", function (d) {\n          return \"darkBlue\";\n        })\n        .attr(\"fill\", \"darkBlue\");\n\n      canvas?.node\n        .append(\"g\")\n        .attr(\"class\", \"axis axis--x\")\n        .attr(\"transform\", \"translate(0,\" + canvas.y + \")\")\n        .call(\n          axisBottom(x).tickFormat(function (d) {\n            const formatMillisecond = timeFormat(\".%L\"),\n              formatSecond = timeFormat(\":%S\"),\n              formatMinute = timeFormat(\"%H:%M\"),\n              formatHour = timeFormat(\"%H:00\"),\n              formatDay = timeFormat(\"%a %d\"),\n              formatWeek = timeFormat(\"%b %d\"),\n              formatMonth = timeFormat(\"%B\"),\n              formatYear = timeFormat(\"%Y\"),\n              multiFormat = function (date: Date) {\n                return (timeSecond(date) < date\n                  ? formatMillisecond\n                  : timeMinute(date) < date\n                  ? formatSecond\n                  : timeHour(date) < date\n                  ? formatMinute\n                  : timeDay(date) < date\n                  ? formatHour\n                  : timeMonth(date) < date\n                  ? timeWeek(date) < date\n                    ? formatDay\n                    : formatWeek\n                  : timeYear(date) < date\n                  ? formatMonth\n                  : formatYear)(date);\n              };\n            return multiFormat(d);\n          })\n        );\n\n      canvas?.node\n        .append(\"g\")\n        .selectAll(\"dot\")\n        .data(\n          mergedWeatherData.filter(\n            (d) => d.wind_from_direction_at_10m_above_ground_level\n          )\n        )\n        .enter()\n        .append(\"circle\")\n        .attr(\"cx\", function (d: MergedWeatherDataType) {\n          return x(d.datetime!);\n        })\n        .attr(\"cy\", function (d: MergedWeatherDataType) {\n          return y1(d.wind_from_direction_at_10m_above_ground_level!);\n        })\n        .attr(\"r\", 1.5)\n        .style(\"fill\", \"red\");\n\n      canvas.node\n        .append(\"g\")\n        .attr(\"transform\", `translate(${canvas.x - 30}, 0)`)\n        .attr(\"class\", \"axisRed\")\n        .call(axisRight(y1))\n        .append(\"text\")\n        .attr(\n          \"transform\",\n          `rotate(-90) translate(${-(canvas.y / 2)}, ${30}\n            )`\n        )\n        .attr(\"class\", \"label\")\n        .attr(\"text-anchor\", \"middle\")\n        .style(\"font-weight\", \"normal\")\n        .style(\"font-size\", \"12px\")\n        .attr(\"y\", 6)\n        .attr(\"dy\", \".35em\")\n        .attr(\"fill\", \"red\")\n        .text(\"Direction\");\n\n      canvas.node\n        .append(\"g\")\n        .attr(\"class\", \"axis y-axis\")\n        .attr(\"class\", \"axisBlue\")\n\n        .call(\n          axisLeft(y).ticks(\n            Math.min(Math.round(Math.floor(canvas.y / 35) + 1), highestWindSpd),\n            \".0f\"\n          )\n        )\n        .append(\"text\")\n        .attr(\n          \"transform\",\n          \"rotate(-90) translate(\" +\n            -(canvas.y / 2) +\n            \", \" +\n            -defaultCanvas.left * 0.8 +\n            \")\"\n        )\n        .attr(\"class\", \"label\")\n        .attr(\"text-anchor\", \"middle\")\n        .style(\"font-weight\", \"normal\")\n        .style(\"font-size\", \"12px\")\n        .attr(\"y\", 6)\n        .attr(\"dy\", \".35em\")\n        .attr(\"fill\", \"#666\")\n        .text(\"Wind Speed\");\n      canvas.node.selectAll(\".y-axis g text\").attr(\"fill\", \"#666\");\n      canvas.node.selectAll(\".y-axis g line\").attr(\"stroke\", \"#666\");\n\n      const svg = select(\"#my_dataviz-wind\");\n\n      // Handmade legend\n      svg\n        .append(\"circle\")\n        .attr(\"cx\", 10)\n        .attr(\"cy\", 10)\n        .attr(\"r\", 6)\n        .style(\"fill\", \"red\");\n      svg\n        .append(\"text\")\n        .attr(\"x\", 20)\n        .attr(\"y\", 10)\n        .text(\"Wind Direction\")\n        .style(\"font-size\", \"15px\")\n        .attr(\"alignment-baseline\", \"middle\");\n      svg\n        .append(\"circle\")\n        .attr(\"cx\", 150)\n        .attr(\"cy\", 10)\n        .attr(\"r\", 6)\n        .style(\"fill\", \"darkBlue\");\n\n      svg\n        .append(\"text\")\n        .attr(\"x\", 170)\n        .attr(\"y\", 10)\n        .text(\"Wind Speed\")\n        .style(\"font-size\", \"15px\")\n        .attr(\"alignment-baseline\", \"middle\");\n    }\n  };\n\n  return (\n    <Container>\n      <div className=\"App\">\n        <div className=\"header\" style={{ minHeight: \"70px\" }}>\n          <h3 className=\"text-muted\">Wind Dashboard</h3>\n          <svg id=\"my_dataviz-wind\" height=\"30\" width={canvas?.x ?? 405}></svg>\n        </div>\n\n        <div\n          style={{\n            textAlign: \"center\",\n            borderBottom: \"1px solid #e5e5e5\",\n            padding: \"0\",\n            minHeight: \"300px\",\n          }}\n          className={`jumbotron ${wrapperDiv.replace(\".\", \"\")}`}\n          id={targetId}\n        />\n      </div>\n    </Container>\n  );\n}\n\nexport default WindDashboard;\n"],"sourceRoot":""}